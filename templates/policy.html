{% extends "base.html" %}

{% block title %}Kebijakan Optimal - Sistem Parkir Otomatis{% endblock %}

{% block content %}
<h1 class="mb-4">Kebijakan Optimal yang Dipelajari</h1>

{% if error %}
<div class="alert alert-danger">
    <i class="bi bi-exclamation-triangle me-2"></i>{{ error }}
    <div class="mt-3">
        <a href="/train" class="btn btn-primary">
            <i class="bi bi-arrow-left me-1"></i>Kembali ke Pelatihan Model
        </a>
    </div>
</div>
{% else %}
<div class="card mb-4">
    <div class="card-header bg-success text-white">
        <h2 class="h4 mb-0">Visualisasi Kebijakan Optimal</h2>
    </div>
    <div class="card-body text-center">
        <div class="mb-4">
            <h4 class="mb-3">Status Slot Parkir: {{ slot_status }}</h4>
            <p class="text-muted">Kebijakan optimal berdasarkan konfigurasi slot parkir saat ini</p>
        </div>
        
        <img src="/static/img/{{ plot_path }}" class="img-fluid rounded shadow" alt="Kebijakan Optimal">
        
        <div class="mt-4 alert alert-info">
            <strong>Petunjuk:</strong>
            <ul class="mb-0">
                <li><span class="badge bg-success">Hijau</span> = Slot Kosong</li>
                <li><span class="badge bg-danger">Merah</span> = Slot Terisi</li>
                <li><span class="badge bg-primary">Biru</span> = Area Jalan</li>
                <li><strong>P</strong> = Aksi Parkir</li>
                <li><strong>←, →, ↑, ↓</strong> = Arah gerakan optimal</li>
            </ul>
        </div>
    </div>
</div>

<div class="card mb-4">
    <div class="card-header bg-primary text-white">
        <h2 class="h4 mb-0">Analisis Kebijakan</h2>
    </div>
    <div class="card-body">
        <p>Visualisasi di atas menunjukkan kebijakan optimal yang dipelajari oleh agen Q-Learning dalam menavigasi area parkir. Berikut interpretasi dari pola yang terlihat:</p>
        
        <ul class="mb-4">
            <li><strong>Adaptif terhadap Status Slot:</strong> Agen mengarahkan kendaraan ke slot parkir terdekat yang masih kosong berdasarkan status slot saat ini.</li>
            <li><strong>Pola Navigasi Logis:</strong> Dari posisi tengah (1,1), agen akan memilih arah yang paling efisien untuk mencapai slot kosong terdekat.</li>
            <li><strong>Aksi Parkir Tepat Sasaran:</strong> Simbol "P" muncul tepat di atas slot parkir kosong, menunjukkan bahwa agen telah belajar kapan harus melakukan aksi parkir.</li>
            <li><strong>Menghindari Tabrakan:</strong> Kebijakan optimal tidak mengarahkan agen ke dinding atau batas area parkir.</li>
        </ul>
        
        <div class="alert alert-warning">
            <strong>Catatan:</strong> Kebijakan ini spesifik untuk konfigurasi slot parkir yang ditampilkan. Jika status slot berubah, kebijakan optimal juga akan berubah sesuai dengan pembelajaran RL.
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-header bg-info text-white">
                <h3 class="h5 mb-0">Latih Ulang dengan Parameter Berbeda</h3>
            </div>
            <div class="card-body">
                <p>Anda dapat mengeksplorasi bagaimana perubahan hiperparameter memengaruhi kebijakan optimal yang dipelajari.</p>
                <a href="/train" class="btn btn-primary w-100">
                    <i class="bi bi-gear me-1"></i>Atur Parameter Pelatihan
                </a>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-header bg-warning">
                <h3 class="h5 mb-0">Lihat Demonstrasi Langkah Demi Langkah</h3>
            </div>
            <div class="card-body">
                <p>Saksikan bagaimana agen menerapkan kebijakan optimal ini dalam simulasi parkir otomatis.</p>
                <a href="/demo" class="btn btn-warning w-100">
                    <i class="bi bi-play-circle me-1"></i>Demonstrasi Parkir Otomatis
                </a>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}